[gd_scene load_steps=22 format=3 uid="uid://b6853ld7uweea"]

[ext_resource type="Script" path="res://Logic.gd" id="1"]
[ext_resource type="PackedScene" uid="uid://bsa5u4qnv0qry" path="res://scenes/SystemBar.tscn" id="2"]
[ext_resource type="FontFile" path="res://resources/fonts/italic.tres" id="3"]
[ext_resource type="Script" path="res://addons/controller_icons/objects/TextureRect.gd" id="4"]
[ext_resource type="Texture2D" uid="uid://cnghdqiitl0fu" path="res://addons/controller_icons/assets/key/esc.png" id="5"]
[ext_resource type="FontFile" path="res://resources/fonts/normal.tres" id="6"]
[ext_resource type="PackedScene" uid="uid://bh7mev0nkdw1i" path="res://scenes/GamesGrid.tscn" id="7"]
[ext_resource type="PackedScene" uid="uid://b7fp4fy1hji0q" path="res://scenes/GameInfo.tscn" id="8"]
[ext_resource type="Texture2D" uid="uid://bp58drjdgvxsi" path="res://addons/controller_icons/assets/key/enter_alt.png" id="9"]
[ext_resource type="PackedScene" uid="uid://df1pettwt465y" path="res://scenes/sort_filter_popup/SortFilterPopup.tscn" id="11"]
[ext_resource type="Texture2D" uid="uid://dq0fide2iu37s" path="res://addons/controller_icons/assets/key/shift_alt.png" id="12"]
[ext_resource type="Script" path="res://scenes/GamesGridManager.gd" id="13"]
[ext_resource type="PackedScene" uid="uid://bs5pj0f54n7ib" path="res://scenes/MiniGameStats.tscn" id="14"]
[ext_resource type="Texture2D" uid="uid://dxcfr4bhfw4lq" path="res://addons/controller_icons/assets/key/ctrl.png" id="16"]
[ext_resource type="Script" path="res://addons/retrohub_theme_helper/ui/AccessibilityFocus.gd" id="17"]

[sub_resource type="StyleBoxEmpty" id="1"]

[sub_resource type="StyleBoxEmpty" id="2"]

[sub_resource type="StyleBoxEmpty" id="3"]

[sub_resource type="StyleBoxEmpty" id="4"]

[sub_resource type="StyleBoxEmpty" id="5"]

[sub_resource type="Theme" id="6"]
VScrollBar/styles/grabber = SubResource("1")
VScrollBar/styles/grabber_highlight = SubResource("2")
VScrollBar/styles/grabber_pressed = SubResource("3")
VScrollBar/styles/scroll = SubResource("4")
VScrollBar/styles/scroll_focus = SubResource("5")

[node name="Theme" type="Node"]
script = ExtResource("1")

[node name="ColorRect" type="ColorRect" parent="."]
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
color = Color(0.121569, 0.121569, 0.121569, 1)

[node name="SystemBar" parent="." instance=ExtResource("2")]
anchors_preset = -1
anchor_bottom = 0.232
offset_bottom = -0.200012
grow_horizontal = 2
grow_vertical = 2

[node name="NoGames" type="Control" parent="."]
unique_name_in_owner = true
layout_mode = 3
anchor_left = 0.164
anchor_top = 0.244
anchor_right = 0.836
anchor_bottom = 0.857
offset_left = 0.0639954
offset_top = 0.599991
offset_right = 0.935974
offset_bottom = -0.200012

[node name="Label" type="Label" parent="NoGames"]
layout_mode = 0
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -246.5
offset_top = -159.5
offset_right = 246.5
offset_bottom = 159.5
theme_override_fonts/font = ExtResource("3")
text = "RetroHub couldn't find any games. Ensure your games directory is properly set, and with the structure required.
 
You may also need to look at the game files extensions and see if they match what each system is expecting. If not, you can configure accepted extensions from the main menu."
horizontal_alignment = 1
vertical_alignment = 1
autowrap_mode = 2

[node name="AccessibilityFocus" type="Node" parent="NoGames/Label"]
script = ExtResource("17")

[node name="HBoxContainer" type="HBoxContainer" parent="NoGames"]
layout_mode = 0
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -136.0
offset_top = -40.0
offset_right = 136.0

[node name="Label" type="Label" parent="NoGames/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
theme_override_fonts/font = ExtResource("6")
text = "Press"

[node name="ControllerTextureRect" type="TextureRect" parent="NoGames/HBoxContainer"]
custom_minimum_size = Vector2(40, 40)
layout_mode = 2
size_flags_horizontal = 0
texture = ExtResource("5")
expand_mode = 1
script = ExtResource("4")
path = "rh_menu"

[node name="Label2" type="Label" parent="NoGames/HBoxContainer"]
layout_mode = 2
size_flags_horizontal = 0
theme_override_fonts/font = ExtResource("6")
text = "to open the main menu."

[node name="AccessibilityFocus" type="Node" parent="NoGames/HBoxContainer"]
script = ExtResource("17")

[node name="GamesGrid" type="Control" parent="."]
layout_mode = 3
anchor_left = 0.064
anchor_top = 0.223
anchor_right = 0.936
anchor_bottom = 0.888

[node name="GamesGridManager" type="Control" parent="GamesGrid"]
layout_mode = 1
anchor_right = 1.0
anchor_bottom = 0.974
offset_right = 0.456055
offset_bottom = -0.0809937
grow_horizontal = 2
grow_vertical = 2
theme = SubResource("6")
script = ExtResource("13")
games_grid = ExtResource("7")

[node name="Sorting" type="ColorRect" parent="GamesGrid"]
unique_name_in_owner = true
visible = false
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 92.0
offset_top = 140.0
offset_right = -92.928
offset_bottom = -141.04
color = Color(0, 0, 0, 0.72549)

[node name="Label" type="Label" parent="GamesGrid/Sorting"]
layout_mode = 0
anchor_right = 1.0
anchor_bottom = 1.0
theme_override_fonts/font = ExtResource("3")
text = "Sorting games, please wait..."

[node name="GameInfo" parent="." instance=ExtResource("8")]
visible = false

[node name="BottomInfo" type="HBoxContainer" parent="."]
unique_name_in_owner = true
anchors_preset = -1
anchor_top = 0.878
anchor_right = 1.0
anchor_bottom = 1.0
offset_left = 42.0
offset_top = 0.271973
offset_right = -37.0
offset_bottom = -20.0
size_flags_horizontal = 3

[node name="MiniGameStats" parent="BottomInfo" instance=ExtResource("14")]
layout_mode = 2

[node name="HBoxContainer2" type="HBoxContainer" parent="BottomInfo"]
layout_mode = 2
size_flags_vertical = 8

[node name="ControllerTextureRect" type="TextureRect" parent="BottomInfo/HBoxContainer2"]
custom_minimum_size = Vector2(40, 40)
layout_mode = 2
texture = ExtResource("12")
expand_mode = 1
script = ExtResource("4")
path = "rh_theme_menu"

[node name="Label" type="Label" parent="BottomInfo/HBoxContainer2"]
layout_mode = 2
text = "Sort/filter options"

[node name="SortFilterPopup" parent="." instance=ExtResource("11")]
unique_name_in_owner = true
position = Vector2i(401, 241)
visible = false

[node name="AcceptIcon" type="TextureRect" parent="." groups=["icon_rh_accept"]]
unique_name_in_owner = true
custom_minimum_size = Vector2(30, 30)
offset_left = 1.0
offset_top = -33.0
offset_right = 31.0
offset_bottom = -3.0
texture = ExtResource("9")
expand_mode = 1
script = ExtResource("4")
path = "rh_accept"
max_width = 30

[node name="MoreInfoIcon" type="TextureRect" parent="." groups=["icon_rh_major_option"]]
unique_name_in_owner = true
custom_minimum_size = Vector2(30, 30)
offset_left = 1.0
offset_top = -33.0
offset_right = 31.0
offset_bottom = -3.0
texture = ExtResource("16")
expand_mode = 1
script = ExtResource("4")
path = "rh_major_option"
max_width = 30

[connection signal="system_selected" from="SystemBar" to="GamesGrid/GamesGridManager" method="_on_SystemBar_system_selected"]
[connection signal="expensive_sort" from="GamesGrid/GamesGridManager" to="." method="_on_GamesGridManager_expensive_sort"]
[connection signal="game_selected" from="GamesGrid/GamesGridManager" to="BottomInfo/MiniGameStats" method="_on_GamesGridManager_game_selected"]
[connection signal="show_game_info" from="GamesGrid/GamesGridManager" to="GameInfo" method="_on_show_game_info"]
[connection signal="sort_over" from="GamesGrid/GamesGridManager" to="." method="_on_GamesGridManager_sort_over"]
[connection signal="setting_changed" from="SortFilterPopup" to="GamesGrid/GamesGridManager" method="_on_SortFilterPopup_setting_changed"]
